import { echo, exec } from 'shelljs';
import path from 'path';
import fs from 'fs';

import { version } from '../../config';

const BASE_PATH = path.resolve(__dirname, '..');
const DOTS_PATH = path.resolve(__dirname, 'dots', 'link');

export default {
  link() {
    const files = fs.readdirSync(DOTS_PATH);

    files.forEach(file => {
      const basename = path.basename(file);
      const filePath = path.join(BASE_PATH, DOTS_PATH, basename);

      echo(`Linking ${filePath} to your home directory...`);
      exec(`ln -sf ${filePath} ~`);
    });
  },

  source() {
    exec(`. ~/.bash_profile`);
  }
}
